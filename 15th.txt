use bookstore

db.BookInventory.insertMany([
  { title: "Dune", author: "Frank Herbert", category: "Science Fiction", availableCopies: 5 },
  { title: "Neuromancer", author: "William Gibson", category: "Science Fiction", availableCopies: 3 },
  { title: "Foundation", author: "Isaac Asimov", category: "Science Fiction", availableCopies: 0 },
  { title: "The Martian", author: "Andy Weir", category: "Science Fiction", availableCopies: 7 },
  { title: "Sapiens", author: "Yuval Noah Harari", category: "History", availableCopies: 4 },
  { title: "Clean Code", author: "Robert C. Martin", category: "Education", availableCopies: 2 },
  { title: "The Hobbit", author: "J.R.R. Tolkien", category: "Fantasy", availableCopies: 1 }
])

2) Retrieve all books in the "Science Fiction" category

db.BookInventory.find({ category: "Science Fiction" }).sort({ title: 1 }).toArray()

3) Decrease availableCopies by 1 when a book is purchased (safe / atomic)

db.BookInventory.findOneAndUpdate(
  { title: "Dune", availableCopies: { $gt: 0 } },
  { $inc: { availableCopies: -1 } },
  { returnDocument: "after" }
)

4) Delete all books that are out of stock (availableCopies = 0)

db.BookInventory.deleteMany({ availableCopies: 0 })
